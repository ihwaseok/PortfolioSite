<!-- --- --><!-- title: 개요 --><!-- updated: 2023-01-12 05:39:45Z --><!-- created: 2023-01-12 02:16:35Z --><!-- latitude: 37.44491680 --><!-- longitude: 127.13886840 --><!-- altitude: 0.0000 --><!-- --- -->## Log4j- 자바 기반 로깅 프레임워크- 문제나 정보를 식별하기 위해 타임스탬프 등의 정해진 양식에 따라 로그를 남기는 목적으로 사용- 설정 파일에서 로그레벨을 지정하고 그 등급 이상의 로그만 저장하는 방식<br>## Apache Log4j 2- 아파치 Log4j 팀에서 기존 버전의 문제를 해결하고 확장성을 높이기 위해 재개발한 프레임워크- Log4j 1.x 버전의 하위호환을 지원하지 않는다<br>## Log4j 2 특징- 확장성 개성  → 플러그인 시스템 지원으로 사용자 지정 요소를 정의하고 구성 가능- 가독성 개선- 구성 문법 단순화- 속도 개선- xml, json, yaml, properties 구성 지원- 필터 개선- 속성 찾기 지원- 여러 API 지원으로 다양한 프로그램과 함께 사용 가능- 사용자 지정 로그 레벨- 자바8 스타일 람다식 지원- 마커- 사용자 지정 메시지 오브젝트 지원<br>## 구조![05a97ea01ef55a485f25929a8e295997.png](/joplinRes/_resources/05a97ea01ef55a485f25929a8e295997.png)|이름|내용||---|---||Logger Object| 로깅 정보 캡처를 담당하는 최상위 계층 로거||Layout Object| 로깅 정보의 형식을 결정하는데 사용하는 객체 제공||Appender Object| 화면이나 파일에 로깅 정보를 기록||Level Object| 로깅 정보의 세분성 및 우선순위 정의||Filter Object| 로깅 정보를 분석하여 해당 정보가 로깅되야 하는지 여부를 확인하기 위한 추가결정을 위해 사용||Object Renderer| 다양한 객체의 문자열 표현에 특화||Log Manager| 항상 시스템 전체 설정 파일에서 초기 설정 매개변수를 읽는 일을 담당|<br>## 로그 레벨|이름|내용||---|---||FATAL| 아주 심각한 에러<br>시스템적으로 심각한 문제가 발생하여 애플리케이션이 작동 불가능||ERROR| 요청을 처리하는 중에 문제가 발생||WARN| 처리 가능한 문제지만 향후 시스템 에러의 원인이 될 수 있는 경고성 메시지||INFO| 로그인, 상태변경 같은 정보성 메시지||DEBUG| 개발 시 디버그 용도로 사용한 메시지||TRACE| DEBUG 레벨이 너무 광범위한 것을 해결하기 위해 좀 더 상세한 상태로 나타낸다|<br>## 보안성 이슈- 원격 코드 실행을 허용 할 수 있는 <abbr title="Java Naming and Directory Interface">JNDI</abbr> 주입 취약점 발견   → 기록된 메시지에 신뢰할 수 없는 데이터를 포함시켜 악성 서버에 연결 가능- Log4j 2.0 ~ 2.14.1 버전이 대상이기 때문에 2.15.0 이후 버전으로 업데이트 필요